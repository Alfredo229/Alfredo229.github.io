<html>
<head>
<title>FM scan</title>
<script>

frequencyList = new Array(885,893,903,913,919,925,935,943,951,959,969,977,985,995,1007,1023,1029,1057,1063,1073);

function init(){


 //Resets variables
 result = new Array(99,99,99);
 resultIndexA = new Array(0,0,0);
 resultIndexB = new Array(0,0,0);
 testString = '';

 offset = new Array();
 readLength = new Array();

//offset between the calculated ratio and the intended ratio
 myBrains = 0; 

 mySeek = 0;

 //loads form
 pointA = Number(document.getElementById("mainAxis").value)-1;

// currentRatio = Math.abs(Number(document.getElementById("ratio1").value) / Number(document.getElementById("ratio2").value));

 theInput1 = Math.abs(Number(document.getElementById("ratio1").value));
 theInput2 = Math.abs(Number(document.getElementById("ratio2").value));
 theInput3 = Math.abs(Number(document.getElementById("ratio3").value));

 theRatio1 = theInput1;
 theRatio3 = theInput3;
 theRatio2 = theInput1*theInput3/theInput2;

 for(i=0; i < pointA; i++){
  if(i!=pointA){
   offset[0] = Math.abs((frequencyList[pointA] - frequencyList[i]));
   targetOffset = offset[0] * theRatio1;

   for(x=0 ;x < pointA ;x++){
    if(x != i){
    offset[2] = Math.abs(frequencyList[pointA] - frequencyList[x]);
//    theOffsetB = theRatio2 * offset[2];

    offset[1] = Math.abs(offset[0] - offset[2]);
    
    readLength[0] = Math.min(offset[0],offset[1],offset[2]);
    readLength[2] = Math.max(offset[0],offset[1],offset[2]);
    for(z = 0; z < 3; z++){
     if(offset[z] != readLength[0] || readLength[2])
      readLength[1] = offset[z];
    }

    targetRatio = readLength[0]*readLength[2]/readLength[1];

    calculatedOffset = Math.abs(targetRatio - theRatio2);

    validate();
 }}}}

 gg=frequencyList.length;

/* for(i=pointA+1 ; i < gg; i++){

   offsetA = Math.abs((frequencyList[pointA] - frequencyList[i]));
   targetOffset = offsetA * theRatio1;

   for(x=pointA+1 ;x < gg ;x++){
    if(x!=i){

    if(x != i){
    offsetB = Math.abs(frequencyList[pointA] - frequencyList[x]);
    offsetB *= theRatio2;

     calculatedOffset = Math.abs(targetOffset - offsetB);

     validate();
 }}}}*/
}

function validate(){
 //Sweeps the 5 result array and pushes down if there's a match
 /*needs to swipe the array and keep pushing the higher numbers until... no
 Start at the best result then push if it finds something higher (golf)*/
 if(calculatedOffset < result[0]){
  for(g=2; g>0; g--){
   result[g] = result[g-1]
   resultIndexA[g] = resultIndexA[g-1];
   resultIndexB[g] = resultIndexB[g-1];
  }
  result[0] = calculatedOffset;
  resultIndexA[0] = x;
  resultIndexB[0] = i;
}

 //Prints the results
 resultString = '';
 frequencyA = '';
 frequencyB = '';
 for(g=0; g<3; g++){
  resultString += result[g] + ' ';
  frequencyA += frequencyList[resultIndexA[g]] + ' ';
  frequencyB += frequencyList[resultIndexB[g]] + ' ';
 }
 document.getElementById("mainOutput1").innerHTML = result[0];
 document.getElementById("mainOutput2").innerHTML = result[1];
 document.getElementById("mainOutput3").innerHTML = result[2];
 document.getElementById("mainOutput4").innerHTML = frequencyA;
 document.getElementById("mainOutput5").innerHTML = frequencyB;
}

</script>
<body>
<h1>Values offset must match a segment</h1>
<div style="margin:auto">
<p>Select main axis</p>
<form>
<select id="mainAxis">
 <option value = "1">885</option>
 <option value = "2">893</option>
 <option value = "3">903</option>
 <option value = "4">913</option>
 <option value = "5">919</option>
 <option value = "6">925</option>
 <option value = "7">935</option>
 <option value = "8">943</option>
 <option value = "9">951</option>
 <option value = "10">959</option>
 <option value = "11">969</option>
 <option value = "12">977</option>
 <option value = "13">985</option>
 <option value = "14">995</option>
 <option value = "15">1007</option>
 <option value = "16">1023</option>
 <option value = "17">1029</option>
 <option value = "18">1057</option>
 <option value = "19">1063</option>
 <option value = "20">1073</option>
</select>
<br>
<input type="button" value="Calculate" onClick="init()"></input>
<p>Input ratio</p>
Min<input type="text" id="ratio1"></input><br>
Mid<input type="text" id="ratio2"></input><br>
Max<input type="text" id="ratio3"></input><br>
</form>
<p id="mainOutput1"></p>
<p id="mainOutput2"></p>
<p id="mainOutput3"></p>
<p id="mainOutput4"></p>
<p id="mainOutput5"></p>
</div>
</body>
</html>